{"ast":null,"code":"var _jsxFileName = \"/Users/viniciusdias/Documents/projetos/feast-app-front-end/src/contexts/authGoogle.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useEffect, useState } from 'react';\nimport { GoogleAuthProvider, getAuth, signInWithPopup } from 'firebase/auth';\nimport { app } from '../service/firebaseConfig';\nimport { Navigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst provider = new GoogleAuthProvider();\nexport const AuthGoogleContext = /*#__PURE__*/createContext({});\nexport const AuthGoogleProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const auth = getAuth(app);\n  const [user, setUser] = useState(null);\n  const [userLogado, setUserLogado] = useState(null);\n  const [userLogado2, setUserLogado2] = useState(null);\n  useEffect(() => {\n    const loadStorageAuth = () => {\n      const sessionToken = sessionStorage.getItem(\"@AuthFirebase:token\");\n      const sessionUser = sessionStorage.getItem(\"@AuthFirebase:user\");\n      if (sessionToken && sessionUser) {\n        setUser(sessionUser);\n      }\n    };\n    loadStorageAuth();\n  }, []);\n  const signInGoogle = () => {\n    signInWithPopup(auth, provider).then(result => {\n      const credential = GoogleAuthProvider.credentialFromResult(result);\n      const token = credential.accessToken;\n      const user = result.user;\n      setUser(user);\n      sessionStorage.setItem(\"@AuthFirebase:token\", token);\n      sessionStorage.setItem(\"@AuthFirebase:user\", JSON.stringify(user));\n    }).catch(error => {\n      const errorCode = error.code;\n      const errorMessage = error.message;\n      const email = error.customData.email;\n      const credential = GoogleAuthProvider.credentialFromError(error);\n    });\n  };\n  function signOut() {\n    sessionStorage.clear();\n    setUser(null);\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 10\n    }, this);\n  }\n  ;\n  useEffect(() => {\n    if (!!user) {\n      setUserLogado(JSON.parse(JSON.stringify(user)));\n    } else {\n      setUserLogado2(JSON.parse(user));\n    }\n  }, [user]);\n  return /*#__PURE__*/_jsxDEV(AuthGoogleContext.Provider, {\n    value: {\n      signInGoogle,\n      signed: !!user,\n      user,\n      userLogado,\n      signOut\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 3\n  }, this);\n};\n_s(AuthGoogleProvider, \"eYkwPIqtsq5peMkqJLSkhtI0//0=\");\n_c = AuthGoogleProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthGoogleProvider\");","map":{"version":3,"names":["React","createContext","useEffect","useState","GoogleAuthProvider","getAuth","signInWithPopup","app","Navigate","provider","AuthGoogleContext","AuthGoogleProvider","children","auth","user","setUser","userLogado","setUserLogado","userLogado2","setUserLogado2","loadStorageAuth","sessionToken","sessionStorage","getItem","sessionUser","signInGoogle","then","result","credential","credentialFromResult","token","accessToken","setItem","JSON","stringify","catch","error","errorCode","code","errorMessage","message","email","customData","credentialFromError","signOut","clear","parse","signed"],"sources":["/Users/viniciusdias/Documents/projetos/feast-app-front-end/src/contexts/authGoogle.js"],"sourcesContent":["import React, { createContext, useEffect, useState } from 'react';\nimport { GoogleAuthProvider, getAuth, signInWithPopup } from 'firebase/auth';\nimport { app } from '../service/firebaseConfig';\nimport { Navigate } from 'react-router-dom';\n\nconst provider = new GoogleAuthProvider();\n\nexport const AuthGoogleContext = createContext({});\n\nexport const AuthGoogleProvider = ({ children }) => {\n\tconst auth = getAuth(app);\n\tconst [user, setUser] = useState(null);\n\tconst [userLogado, setUserLogado] = useState(null);\n\tconst [userLogado2, setUserLogado2] = useState(null);\n\n\tuseEffect(() => {\n\t\tconst loadStorageAuth = () => {\n\t\t\tconst sessionToken = sessionStorage.getItem(\"@AuthFirebase:token\");\n\t\t\tconst sessionUser = sessionStorage.getItem(\"@AuthFirebase:user\");\n\n\t\t\tif (sessionToken && sessionUser) {\n\t\t\t\tsetUser(sessionUser);\n\t\t\t}\n\t\t};\n\t\tloadStorageAuth();\n\t}, []);\n\n\tconst signInGoogle = () => {\n\t\tsignInWithPopup(auth, provider)\n\t\t\t.then((result) => {\n\t\t\t\tconst credential = GoogleAuthProvider.credentialFromResult(result);\n\t\t\t\tconst token = credential.accessToken;\n\t\t\t\tconst user = result.user;\n\t\t\t\tsetUser(user);\n\t\t\t\tsessionStorage.setItem(\"@AuthFirebase:token\", token);\n\t\t\t\tsessionStorage.setItem(\"@AuthFirebase:user\", JSON.stringify(user));\n\t\t\t}).catch((error) => {\n\t\t\t\tconst errorCode = error.code;\n\t\t\t\tconst errorMessage = error.message;\n\t\t\t\tconst email = error.customData.email;\n\t\t\t\tconst credential = GoogleAuthProvider.credentialFromError(error);\n\t\t\t});\n\t};\n\n\tfunction signOut() {\n\t\tsessionStorage.clear();\n\t\tsetUser(null);\n\n\t\treturn <Navigate to=\"/\" />;\n\t};\n\n\tuseEffect(() => {\n\t\tif (!!user) {\n\t\t\tsetUserLogado(JSON.parse(JSON.stringify(user)));\n\t\t} else {\n\t\t\tsetUserLogado2(JSON.parse(user));\n\t\t}\n\t}, [user])\n\n\treturn (\n\t\t<AuthGoogleContext.Provider value={{ signInGoogle, signed: !!user, user, userLogado, signOut }}>\n\t\t\t{children}\n\t\t</AuthGoogleContext.Provider>\n\t)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}